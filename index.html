<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bandeali Enterprises Catalogue</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="header-row">
    <img src="Logo.png" alt="Bandeali Enterprises Logo" class="Logo" />
    <h1><span class="line1">BANDEALI</span><span class="line2">ENTERPRISES</span></h1>
  </div>
  <div class="red-bar">
    <span>MOB. NO. :- 8237979782, 9155533347 &nbsp;&nbsp; MOB. NO. :- 8237979782, 9155533347 &nbsp;&nbsp;</span>
  </div>
  <input type="search" id="searchInput" placeholder="Search products..." aria-label="Search products" />
</header>

<nav class="categories-nav" aria-label="Product categories"></nav>

<main>
  <section id="productsContainer" class="products-container" aria-live="polite"></section>
  <section id="compareSection" class="compare-section">
    <h2>Compare Products</h2>
    <table id="compareTable" class="compare-table" aria-label="Comparison table"></table>
    <button id="clearCompareBtn" class="clear-compare-btn" type="button">Clear Comparison</button>
  </section>
</main>

<footer>
  <div class="footer-container">
    <div class="footer-col footer-about">
      <h3>Bandeali Enterprises</h3>
      <p>Har Budget, Har Brand – Mobile Mile Yahin!</p>
      <p><strong>Contact:</strong> <a href="tel:+918237979782">8237979782</a></p>
      <p><strong>Email:</strong> <a href="mailto:Bandealienterprises@gmail.com">Bandealienterprises@gmail.com</a></p>
      <p>Opposite paras readymade store,<br/>colliery road, old basti, ballarpur,<br/>chandrapur, maharashtra, 442701</p>
      <div class="footer-social-row">
        <a href="https://www.instagram.com/bandeali_enterprises" target="_blank" rel="noopener" aria-label="Instagram">
          <img src="instagram-icon.png" alt="Instagram" class="footer-instagram-icon"/>
        </a>
        <span class="footer-follow-text">Follow us</span>
      </div>
    </div>
    <div class="footer-col footer-links">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Products</a></li>
        <li><a href="#">Categories</a></li>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Contact Us</a></li>
      </ul>
    </div>
    <div class="footer-col footer-newsletter">
      <h4>Newsletter</h4>
      <p>Sign up for latest updates and offers</p>
      <form id="newsletterForm">
        <input type="text" id="contactInput" placeholder="Your email or mobile number" required aria-label="Email or mobile number" />
        <button type="submit">Subscribe</button>
      </form>
    </div>
    <div class="footer-col footer-payments">
      <h4>Payment Methods</h4>
      <div class="payment-icons">
        <img src="visa.png" alt="Visa"/>
        <img src="mastercard.png" alt="MasterCard"/>
        <img src="upi.svg" alt="UPI"/>
        <img src="wallet.png" alt="Wallet"/>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>© 2025 Bandeali Enterprises. All rights reserved.</p>
  </div>
</footer>

<!-- Popup Modal -->
<div id="customModal" class="custom-modal">
  <div class="custom-modal-content">
    <span id="closeModalBtn" class="custom-modal-close">&times;</span>
    <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" alt="Success" style="width:45px;margin-bottom:10px;">
    <h2>Congratulations!</h2>
    <p id="customModalMsg"></p>
  </div>
</div>

<!-- Floating Contact Buttons -->
<div id="contactButtons">
  <a href="https://wa.me/918237979782" class="whatsapp-btn" target="_blank" rel="noopener" aria-label="Chat WhatsApp">WhatsApp</a>
  <a href="mailto:Bandealienterprises@gmail.com" class="email-btn" aria-label="Send Email">Email Us</a>
</div>

<script>
let products = [];
let selectedCategory = "All";
let compareList = new Set();

async function loadProducts() {
  try {
    const res = await fetch('products.json'); // Apna JSON file correct path pe rakhna!
    products = await res.json();
    initCategories();
    renderProducts(products);
    renderCompareTable();
  } catch (err) {
    console.error("Failed to load products.json:", err);
  }
}

function initCategories() {
  const categoriesNav = document.querySelector(".categories-nav");
  categoriesNav.innerHTML = '';
  const categories = ["All", ...new Set(products.map(p => p.category))];
  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.textContent = cat;
    if (cat === selectedCategory) btn.classList.add("active");
    btn.addEventListener("click", () => {
      selectedCategory = cat;
      updateCategoryActive();
      renderProducts(filterProducts());
      clearCompare();
    });
    categoriesNav.appendChild(btn);
  });
}

function updateCategoryActive() {
  const buttons = document.querySelectorAll(".categories-nav button");
  buttons.forEach(btn => btn.classList.toggle("active", btn.textContent === selectedCategory));
}

function filterProducts() {
  if(selectedCategory === "All") return products;
  return products.filter(p => p.category === selectedCategory);
}

function renderProducts(productList) {
  const container = document.getElementById("productsContainer");
  container.innerHTML = '';
  productList.forEach(prod => {
    const card = document.createElement("div");
    card.className = "product-card";
    const isCompared = compareList.has(prod.id);
    card.innerHTML = `
      <img src="${prod.image}" alt="${prod.name}" class="product-image" />
      <div class="product-content">
        <h3 class="product-name">${prod.name}</h3>
        <p class="product-price">₹${prod.price.toLocaleString()}</p>
        <p class="product-description">${prod.description}</p>
        <p class="product-rating">Rating: ${prod.rating} ★</p>
        <button class="compare-btn">${isCompared ? "Remove from Compare" : "Add to Compare"}</button>
      </div>
    `;
    const btn = card.querySelector(".compare-btn");
    btn.addEventListener("click", () => {
      if(compareList.has(prod.id)) {
        compareList.delete(prod.id);
        btn.textContent = "Add to Compare";
      } else {
        if(compareList.size >= 3) {
          alert("You can only compare up to 3 products.");
          return;
        }
        compareList.add(prod.id);
        btn.textContent = "Remove from Compare";
      }
      renderCompareTable();
    });
    container.appendChild(card);
  });
}

// Compare section logic
const compareTable = document.getElementById("compareTable");
const clearCompareBtn = document.getElementById("clearCompareBtn");
clearCompareBtn.onclick = clearCompare;

function clearCompare() {
  compareList.clear();
  renderProducts(filterProducts());
  renderCompareTable();
}

function renderCompareTable() {
  compareTable.innerHTML = "";
  if(compareList.size === 0) {
    compareTable.innerHTML = "<tr><td colspan='6'>No products selected for comparison.</td></tr>";
    clearCompareBtn.style.display = "none";
    return;
  }
  clearCompareBtn.style.display = "inline-block";

  let headers = "<tr><th>Attribute</th>";
  compareList.forEach(id => {
    const p = products.find(prod=>prod.id === id);
    headers += `<th>${p.name}</th>`;
  });
  headers += "</tr>";

  let imagesRow = "<tr><td>Image</td>";
  let priceRow = "<tr><td>Price</td>";
  let descRow = "<tr><td>Description</td>";
  let ratingRow = "<tr><td>Rating</td>";
  let stockRow = "<tr><td>Stock</td>";
  let categoryRow = "<tr><td>Category</td>";

  compareList.forEach(id => {
    const p = products.find(prod => prod.id === id);
    imagesRow += `<td><img src="${p.image}" alt="${p.name}" style="width:80px;"/></td>`;
    priceRow += `<td>₹${p.price.toLocaleString()}</td>`;
    descRow += `<td>${p.description}</td>`;
    ratingRow += `<td>${p.rating} ★</td>`;
    stockRow += `<td>${p.stock !== undefined ? p.stock : "—"}</td>`;
    categoryRow += `<td>${p.category}</td>`;
  });

  imagesRow += "</tr>"; priceRow += "</tr>"; descRow += "</tr>"; ratingRow += "</tr>"; stockRow += "</tr>"; categoryRow += "</tr>";

  compareTable.innerHTML = headers + imagesRow + priceRow + descRow + ratingRow + stockRow + categoryRow;
}

// Newsletter subscription with popup
document.getElementById("newsletterForm").addEventListener("submit", function(e){
  e.preventDefault();
  const contactInput = document.getElementById("contactInput");
  const value = contactInput.value.trim();
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const mobileRegex = /^[6-9]\d{9}$/;

  if(emailRegex.test(value)) {
    showPopup(value, "email");
  } else if(mobileRegex.test(value)) {
    showPopup(value, "mobile number");
  } else {
    alert("Please enter a valid email or 10 digit mobile number.");
    contactInput.focus();
    return;
  }
  this.reset();
});

function showPopup(value, type) {
  const modal = document.getElementById("customModal");
  const msg = document.getElementById("customModalMsg");
  msg.innerHTML = `You have successfully subscribed with your <b>${type}</b>:<br>${value}`;
  modal.style.display = "flex";
}

document.getElementById("closeModalBtn").onclick = function() {
  document.getElementById("customModal").style.display = "none";
};
window.onclick = function(e) {
  const modal = document.getElementById("customModal");
  if(e.target === modal) modal.style.display = "none";
};

window.addEventListener("DOMContentLoaded", () => {
  loadProducts();
});
</script>
</body>
</html>

